@model ResultIndexResponseViewModel
@inject IConfiguration configuration
<div class="govuk-!-margin-top-8 dysac-job-category-panel">
    <h2>Job categories that might interest you</h2>
    @if (Model.Results.JobCategories.Count() > 1)
    {
        <p class="govuk-body dysac-job-category-summary">We’ve suggested @(@Model.Results.JobCategories.Count() > 3 ? 3 : @Model.Results.JobCategories.Count())  job categories for you to explore based on your responses. Start with these or look at the remaining categories suggested.</p>

    } else
    {
        <p class="govuk-body dysac-job-category-summary">We’ve suggested one job category for you to explore based on your responses.</p>

    }
    <p class="govuk-body dysac-job-category-summary govuk-!-margin-bottom-6">Answer a few specific questions for each category to get suggested careers.</p>
    <div class="govuk-!-margin-top-5 dysac-job-category-tile-container">
        @{
            var jobCategories = Model.Results.JobCategories?.ToArray();

        }
        @for (int index = 0; index < jobCategories.Count(); index++)
        {
            if (index > Model.Results.JobCategoriesNumberToShow-1)
            {
                break;
            }
            <div class="dysac-job-category-tile-wrapper">
                <div class="dysac-job-category-tile-header-image">
                    <img src="@(configuration["AssetsCdn"]+jobCategories[index].ImagePathMobile)" class="dysac-job-category-tile-header-mobile" alt="" />

                    <img src="@(configuration["AssetsCdn"]+jobCategories[index].ImagePathDesktop)" class="dysac-job-category-tile-header-desktop" alt="" />
                </div>
                <div class="dysac-job-category-tile">
                    <h3 class="tile-header"><a href="/job-categories/@jobCategories[index].JobFamilyNameUrl">@jobCategories[index].JobFamilyName</a></h3>
                    <p>@jobCategories[index].JobFamilyText</p>
                    @if (jobCategories[index].NumberOfMatchedJobProfile > 0)
                    {
                        <p class="govuk-body">
                            <a class="govuk-link" asp-controller="results" asp-action="roles" asp-route-id="@jobCategories[index].JobFamilyUrl" draggable="false">View results</a>
                        </p>
                    }
                    else if (jobCategories[index].TotalQuestions > 0)
                    {
                        <p class="govuk-body">
                            <a class="govuk-link" draggable="false" asp-route="filterQuestions" asp-route-assessmenttype="@Model.Results.AssessmentType" asp-route-jobCategoryName="@jobCategories[index].JobFamilyNameUrl" asp-route-questionNumber="0">
                                Answer @jobCategories[index].TotalQuestions more question@{
                                    if (jobCategories[index].TotalQuestions > 1)
                                    @("s")
                            }
                        </a> </p>
                    }
                </div>
            </div>
        }
        </div>

        @if (Model.Results.JobCategories.Count() > Model.Results.JobCategoriesNumberToShow)
        {
        <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-default">
            <div class="govuk-accordion__section">
                <div class="govuk-accordion__section-header">
                    <h2 class="govuk-accordion__section-heading">
                        <span class="govuk-accordion__section-button" id="accordion-default-heading-1">
                            Remaining job categories suggested
                        </span>
                    </h2>
                </div>
                <div id="accordion-default-content-1" class="govuk-accordion__section-content">
                    <div class="govuk-!-margin-top-5 dysac-job-category-tile-container">

                        @for (int index = 3; index < jobCategories.Count(); index++)
                        {

                            <div class="dysac-job-category-tile-wrapper">
                                <div class="dysac-job-category-tile-header-image">
                                    <img src="@(configuration["AssetsCdn"]+jobCategories[index].ImagePathMobile)" class="dysac-job-category-tile-header-mobile" alt="" />

                                    <img src="@(configuration["AssetsCdn"]+jobCategories[index].ImagePathDesktop)" class="dysac-job-category-tile-header-desktop" alt="" />
                                </div>
                                <div class="dysac-job-category-tile">
                                    <h3 class="tile-header"><a href="/job-categories/@jobCategories[index].JobFamilyNameUrl">@jobCategories[index].JobFamilyName</a></h3>
                                    <p>@jobCategories[index].JobFamilyText</p>
                                    @if (jobCategories[index].NumberOfMatchedJobProfile > 0)
                                    {
                                        <p class="govuk-body">
                                            <a class="govuk-link" asp-controller="results" asp-action="roles" asp-route-id="@jobCategories[index].JobFamilyUrl" draggable="false">View results</a>
                                        </p>
                                    }
                                    else if (jobCategories[index].TotalQuestions > 0)
                                    {
                                        <p class="govuk-body">
                                            <a class="govuk-link" draggable="false" asp-route="filterQuestions" asp-route-assessmenttype="@Model.Results.AssessmentType" asp-route-jobCategoryName="@jobCategories[index].JobFamilyNameUrl" asp-route-questionNumber="0">
                                                Answer @jobCategories[index].TotalQuestions more question@{
                                                    if (jobCategories[index].TotalQuestions > 1)
                                                        @("s")
                                                }
                                            </a>
                                        </p>
                                    }
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
            </div>
        
        }
    
</div>
  